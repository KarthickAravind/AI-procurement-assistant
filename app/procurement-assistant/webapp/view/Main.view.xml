<mvc:View
    controllerName="procurement.assistant.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core">
    
    <Page id="mainPage" title="{i18n>mainTitle}" showNavButton="true" navButtonPress="onNavBack">
        <content>
            <SplitContainer id="splitContainer" class="mainContainer">
                
                <!-- Chat Panel (Left Side) -->
                <masterPages>
                    <Page id="chatPage" title="{i18n>chatTitle}" class="chatPanel">
                        <content>
                            <VBox id="chatVBox" class="sapUiNoMargin" height="100%">

                                <!-- Chat Header -->
                                <Bar id="chatHeaderBar" class="chatHeader">
                                    <contentLeft>
                                        <Title id="chatTitle" text="{i18n>chatTitle}" level="H3"/>
                                    </contentLeft>
                                    <contentRight>
                                        <Button id="clearChatBtn" icon="sap-icon://refresh" press="onClearChat" tooltip="Clear Chat"/>
                                    </contentRight>
                                </Bar>
                                
                                <!-- Chat Messages Area -->
                                <ScrollContainer id="chatScrollContainer" class="chatContent" height="100%" vertical="true">
                                    <VBox id="chatMessages" class="sapUiMediumMargin">
                                        <!-- Welcome message -->
                                        <MessageStrip id="welcomeMessage"
                                            text="Hello! I'm your AI procurement assistant. Ask me anything about suppliers, materials, or procurement processes."
                                            type="Information"
                                            class="sapUiMediumMarginBottom"/>
                                    </VBox>
                                </ScrollContainer>

                                <!-- Chat Input Area -->
                                <Bar id="chatInputBar" class="chatInput">
                                    <contentLeft>
                                        <Input
                                            id="chatInput"
                                            placeholder="{i18n>chatPlaceholder}"
                                            value="{/chatMessage}"
                                            submit="onSendMessage"
                                            width="100%"/>
                                    </contentLeft>
                                    <contentRight>
                                        <Button id="sendMessageBtn"
                                            text="{i18n>sendButton}"
                                            type="Emphasized"
                                            press="onSendMessage"
                                            icon="sap-icon://paper-plane"/>
                                    </contentRight>
                                </Bar>
                                
                            </VBox>
                        </content>
                    </Page>
                </masterPages>
                
                <!-- Warehouse Management Panel (Right Side) -->
                <detailPages>
                    <Page id="warehousePage" title="{i18n>warehouseTitle}" class="warehousePanel">
                        <content>
                            <VBox id="warehouseVBox" class="sapUiNoMargin" height="100%">

                                <!-- Warehouse Header -->
                                <!-- Phase 3: Consolidated Warehouse Header -->
                                <Bar id="warehouseHeaderBar" class="warehouseHeader">
                                    <contentLeft>
                                        <Title id="warehouseTitle" text="Warehouse Management" level="H3"/>
                                    </contentLeft>
                                </Bar>
                                
                                <!-- Materials Table -->
                                <ScrollContainer id="warehouseScrollContainer" class="warehouseContent" height="100%" vertical="true">
                                    <Table id="materialsTable"
                                           items="{/materials}"
                                           class="sapUiMediumMargin"
                                           mode="SingleSelect">
                                        <headerToolbar>
                                            <Toolbar id="materialsToolbar">
                                                <Title id="materialsInventoryTitle" text="Materials Inventory" level="H4"/>
                                                <ToolbarSpacer id="toolbarSpacer"/>
                                                <!-- Phase 3: Warehouse Action Buttons -->
                                                <Button id="addMaterialBtn" text="Add Material" type="Emphasized" icon="sap-icon://add" press="onAddMaterial"/>
                                                <Button id="importCSVBtn" text="Import CSV" icon="sap-icon://upload" press="onImportCSV"/>
                                                <Button id="exportDataBtn" text="Export Data" icon="sap-icon://download" press="onExportData"/>
                                                <Button id="refreshBtn" text="Refresh" icon="sap-icon://refresh" press="onRefreshMaterials"/>
                                                <SearchField id="materialSearchField" width="200px" search="onSearchMaterials" placeholder="Search materials..."/>
                                                <Text id="materialsCountText" text="Total: {/materialsCount} items"/>
                                            </Toolbar>
                                        </headerToolbar>
                                        <columns>
                                            <Column id="materialIdColumn">
                                                <Text id="materialIdHeader" text="Material ID"/>
                                            </Column>
                                            <Column id="nameColumn">
                                                <Text id="nameHeader" text="Name"/>
                                            </Column>
                                            <Column id="supplierColumn">
                                                <Text id="supplierHeader" text="Supplier"/>
                                            </Column>
                                            <Column id="quantityColumn">
                                                <Text id="quantityHeader" text="Quantity"/>
                                            </Column>
                                            <Column id="statusColumn">
                                                <Text id="statusHeader" text="Status"/>
                                            </Column>
                                            <Column id="actionsColumn">
                                                <Text id="actionsHeader" text="Actions"/>
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem id="materialListItem" press="onMaterialSelect">
                                                <Text id="materialIdText" text="{materialId}"/>
                                                <Text id="materialNameText" text="{name}"/>
                                                <Text id="materialSupplierText" text="{supplier}"/>
                                                <Text id="materialQuantityText" text="{quantity} {unit}"/>
                                                <ObjectStatus id="materialStatusText" text="{stockStatus}" state="{path: 'stockStatus', formatter: '.formatStockStatus'}"/>
                                                <HBox id="materialActionsBox">
                                                    <Button id="editMaterialBtn" icon="sap-icon://edit" press="onEditMaterial" type="Transparent"/>
                                                    <Button id="deleteMaterialBtn" icon="sap-icon://delete" press="onDeleteMaterial" type="Transparent"/>
                                                </HBox>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </ScrollContainer>
                                
                            </VBox>
                        </content>
                    </Page>
                </detailPages>
                
            </SplitContainer>
        </content>
    </Page>
    
</mvc:View>
